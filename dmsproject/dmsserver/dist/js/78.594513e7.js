"use strict";(self["webpackChunkwyudmsdemo"]=self["webpackChunkwyudmsdemo"]||[]).push([[78],{3078:function(e,a,l){l.r(a),l.d(a,{default:function(){return C}});var t=l(2651),p=l(7951),n=(l(3069),l(4923)),o=(l(6905),l(5478)),i=(l(6809),l(9007),l(3396)),s=l(7139),r=l(9242);const c={style:{position:"relative"}},d={class:"appealContainer"},u={class:"appealTitle"},m={class:"appealFoot"},g={class:"appealTime"},b={class:"appealMan"},h={class:"elpageAppeal"};function f(e,a,l,f,v,w){const y=n.$Y,A=o.mi,_=n.eI,k=p.R,C=t.Z;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",c,[(0,i._)("div",d,[(0,i._)("p",u,(0,s.zw)(f.appealinfo.info[0].type),1),(0,i.wy)((0,i._)("textarea",{class:"appealContent",readonly:"","onUpdate:modelValue":a[0]||(a[0]=e=>f.appealinfo.info[0].content=e)},null,512),[[r.nr,f.appealinfo.info[0].content]]),(0,i._)("p",m,[(0,i._)("span",g,"时间: "+(0,s.zw)(f.appealinfo.info[0].time),1),(0,i._)("span",b,"学生: "+(0,s.zw)(f.appealinfo.info[0].appealstu),1)])]),(0,i.Wm)(_,{class:"appealtable",data:f.appeallist.list,onRowClick:f.rowclick,style:{width:"calc(100% - 430px)","margin-bottom":"18px",display:"inline-block",position:"absolute",left:"430px",top:"20px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{align:"center",label:"时间",prop:"time",width:"200"}),(0,i.Wm)(y,{align:"center",label:"类型",prop:"type",width:"60"}),(0,i.Wm)(y,{align:"center",label:"学生",prop:"appealstu",width:"100"}),(0,i.Wm)(y,{align:"center",label:"学号",prop:"stunumber"}),(0,i.Wm)(y,{align:"center",label:"手机",prop:"phone"}),(0,i.Wm)(y,{align:"center",label:"楼栋",prop:"building",width:"60"}),(0,i.Wm)(y,{align:"center",label:"房间",prop:"room",width:"60"}),(0,i.Wm)(y,{align:"center",prop:"id",width:"100"},{header:(0,i.w5)((()=>[(0,i.Uk)(" 操作 ")])),default:(0,i.w5)((e=>[(0,i.Wm)(A,{style:{color:"var(--text-gray-black)","font-weight":"700"},size:"small",type:"danger",onClick:a=>f.handleAppealDelete(e.$index,e.row)},{default:(0,i.w5)((()=>[(0,i.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onRowClick"]),(0,i._)("button",{class:"clearAppeal",onClick:a[1]||(a[1]=(...e)=>f.clearappeal&&f.clearappeal(...e))},"清空诉求"),(0,i._)("div",h,[(0,i.Wm)(k,{"current-page":f.currentAppealPage,"onUpdate:currentPage":a[2]||(a[2]=e=>f.currentAppealPage=e),"page-size":12,disabled:f.appealPageDisabled,background:"",layout:"total, prev, pager, next, jumper",total:f.appealtotal,onCurrentChange:f.handleAppealCurrentChange},null,8,["current-page","disabled","total","onCurrentChange"])])]),(0,i.Wm)(C,{style:{"z-index":"99"},handleId:f.deleteid,"onUpdate:handleId":a[3]||(a[3]=e=>f.deleteid=e),confirmStr:f.deletestr,onSettable:f.settable,handleType:f.deletetype},null,8,["handleId","confirmStr","onSettable","handleType"])],64)}var v=l(6337),w=l(4870),y=l(65),A={name:"dmsappeal",components:{Dmsconfirm:t.Z},setup(){let e=(0,w.qj)({list:[{id:1,time:"2023-02-17 23:26",type:"建议",appealstu:"方文轩",stunumber:"3119001333",phone:"13356580997",building:"48",room:"202"}]}),a=(0,w.qj)({info:[{type:"类型",content:"正文",time:"2023-03-01 17:16",appealstu:"学生一"}]});const l=(0,y.oR)(),t=()=>{p(1),n(0)},p=a=>{(0,v.cN)({page:a}).then((a=>{0==a.status?(e.list=a.appeallist,u.value=Object.values(a.appealcount[0])[0],b()):console.log(a.message)})).catch((e=>{console.log(e.message)}))},n=e=>{(0,v.km)({id:e}).then((e=>{0==e.status?0==e.appealinfo.length?a.info=[{type:"类型",content:"正文",time:"2023-03-01 17:16",appealstu:"学生一"}]:(a.info=e.appealinfo,l.commit("dsappeal/setActiveAppealpage",d.value)):console.log(e.message)})).catch((e=>{console.log(e.message)}))},o=(0,w.iH)(0),s=(0,w.iH)("确定要删除该诉求吗"),r=(0,w.iH)(2),c=(e,a)=>{console.log(e,a),o.value=a.id,s.value="确定要删除该诉求吗",r.value=2},d=(0,w.iH)(1),u=(0,w.iH)(100),m=(0,w.iH)(!1),g=e=>{p(e)},b=()=>{setTimeout((()=>{let e=0;document.querySelectorAll(".appealtable .el-table__row").forEach((a=>{a.getAttribute("index")||a.addEventListener("click",(function(){l.commit("dsappeal/setActiveAppeal",a.getAttribute("index")),document.querySelectorAll(".appealtable .el-table__row").forEach((e=>{e.classList.remove("activeappealcolor")})),a.classList.add("activeappealcolor")})),a.setAttribute("index",e),e++})),l.state.dsappeal.activeappealpage==d.value?document.querySelectorAll(".appealtable .el-table__row").forEach((e=>{e.getAttribute("index")==l.state.dsappeal.activeappeal&&e.classList.add("activeappealcolor")})):document.querySelectorAll(".appealtable .el-table__row").forEach((e=>{e.classList.remove("activeappealcolor")}))}),500)},h=function(e){n(e.id)},f=()=>{0==e.list.length?l.commit("setNoticeContent","当前已无诉求"):(o.value=-1,s.value="确定要清空所有诉求吗",r.value=3)};return(0,i.bv)((()=>{p(1),n(0)})),(0,i.dl)((()=>{0!=e.list.length?p(d.value):(p(1),n(0))})),{appeallist:e,handleAppealDelete:c,currentAppealPage:d,appealtotal:u,appealPageDisabled:m,handleAppealCurrentChange:g,rowclick:h,appealinfo:a,clearappeal:f,deleteid:o,setappealtable:p,deletetype:r,deletestr:s,settable:t}}},_=l(89);const k=(0,_.Z)(A,[["render",f]]);var C=k}}]);
//# sourceMappingURL=78.594513e7.js.map