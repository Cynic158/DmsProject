"use strict";(self["webpackChunkwyudmsdemo"]=self["webpackChunkwyudmsdemo"]||[]).push([[584],{3724:function(t,e,n){n.d(e,{FJ:function(){return o},LM:function(){return a},M1:function(){return l}});var i=n(1547);function l(t){return(0,i.Z)({url:"/api/getpersonnellist",method:"get",params:t})}function a(t){return(0,i.Z)({url:"/api/getpersonnelphone",method:"get",params:t})}function o(t){return(0,i.Z)({url:"/api/getpersonnelname",method:"get",params:t})}},4450:function(t,e,n){n.d(e,{Z:function(){return F}});var i=n(2651),l=n(3616),a=(n(2064),n(5478)),o=(n(6809),n(3417)),s=(n(172),n(7113),n(2354)),m=(n(3877),n(7960),n(5177)),r=(n(802),n(1015)),p=(n(8474),n(3396)),u=n(9242),d=n(7139);const c={class:"mtmark"},f={class:"mtcontainer"},g=(0,p._)("span",{class:"mttitle"},"处理维修单",-1),h={class:"mtspan"},b=(0,p._)("span",null,"维修类型:",-1),v={class:"mtspan"},y=(0,p._)("span",null,"楼栋房间:",-1),w={class:"mtspan"},j=(0,p._)("span",null,"申报时间:",-1),_={class:"mtspan"},k=(0,p._)("span",null,"预约时间:",-1),x={class:"mtspan"},W=(0,p._)("span",null,"手机号码:",-1),z={class:"mtspan"},C=(0,p._)("span",null,"处理状态:",-1),H=(0,p._)("span",{class:"mtlabel"},"维修描述",-1),U=(0,p._)("span",{class:"mtlabel"},"维修图片",-1),V={class:"imggroup"},M={key:0,class:"mtnoimg"},q={style:{color:"var(--text-green)",position:"absolute",left:"150px",top:"0px"}};function D(t,e,n,D,Z,S){const E=(0,p.up)("CloseBold"),T=r.gn,P=m.F8,I=s.BT,Y=s.km,B=l.nH,F=o.EZ,R=a.mi,L=l.ly,N=i.Z;return(0,p.wg)(),(0,p.iD)(p.HY,null,[(0,p.Wm)(u.uT,{name:"mt"},{default:(0,p.w5)((()=>[(0,p.wy)((0,p._)("div",c,[(0,p._)("div",f,[(0,p.Wm)(T,{onClick:D.mthide,style:{position:"absolute",right:"8px",top:"8px","font-size":"24px",color:"var(--primary-green)","z-index":"90",cursor:"pointer"}},{default:(0,p.w5)((()=>[(0,p.Wm)(E)])),_:1},8,["onClick"]),g,(0,p._)("span",h,[b,(0,p.Uk)((0,d.zw)(D.mtinfoobj.info[0].type),1)]),(0,p._)("span",v,[y,(0,p.Uk)((0,d.zw)(D.mtinfoobj.info[0].room),1)]),(0,p._)("span",w,[j,(0,p.Uk)((0,d.zw)(D.mtinfoobj.info[0].time),1)]),(0,p._)("span",_,[k,(0,p.Uk)((0,d.zw)(D.mtinfoobj.info[0].appoint),1)]),(0,p._)("span",x,[W,(0,p.Uk)((0,d.zw)(D.mtinfoobj.info[0].phone),1)]),(0,p._)("span",z,[C,(0,p.Uk)((0,d.zw)(D.mtinfoobj.info[0].status),1)]),H,(0,p.wy)((0,p._)("textarea",{class:"mttextarea",readonly:"","onUpdate:modelValue":e[0]||(e[0]=t=>D.mtinfoobj.info[0].content=t)},null,512),[[u.nr,D.mtinfoobj.info[0].content]]),U,(0,p._)("div",V,[0==D.mtinfoobj.info[0].img.length?((0,p.wg)(),(0,p.iD)("div",M," 无图片 ")):(0,p.kq)("",!0),D.mtimgurl?((0,p.wg)(),(0,p.j4)(P,{key:1,class:"mtimg",src:D.mtimgurl,"zoom-rate":1.2,"preview-src-list":D.mtimglist.list,"initial-index":0,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,p.kq)("",!0),D.mtimgurl1?((0,p.wg)(),(0,p.j4)(P,{key:2,class:"mtimg",src:D.mtimgurl1,"zoom-rate":1.2,"preview-src-list":D.mtimglist.list,"initial-index":1,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,p.kq)("",!0),D.mtimgurl2?((0,p.wg)(),(0,p.j4)(P,{key:3,class:"mtimg",src:D.mtimgurl2,"zoom-rate":1.2,"preview-src-list":D.mtimglist.list,"initial-index":2,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,p.kq)("",!0)]),(0,p.Wm)(L,{inline:!0,model:D.mtinfoobj.info[0],class:"mtform"},{default:(0,p.w5)((()=>[(0,p.Wm)(B,{label:"维修人员",style:{width:"50%"}},{default:(0,p.w5)((()=>[(0,p.Wm)(Y,{modelValue:D.mtinfoobj.info[0].mtman,"onUpdate:modelValue":e[1]||(e[1]=t=>D.mtinfoobj.info[0].mtman=t),style:{width:"100%"},onChange:D.mtmanchange},{default:(0,p.w5)((()=>[((0,p.wg)(!0),(0,p.iD)(p.HY,null,(0,p.Ko)(D.mtmanoption.arr,(t=>((0,p.wg)(),(0,p.j4)(I,{key:t,label:t,value:t},null,8,["label","value"])))),128)),(0,p.Wm)(I,{label:"暂不选",value:""})])),_:1},8,["modelValue","onChange"]),(0,p._)("span",q,(0,d.zw)(D.mtinfoobj.info[0].mtphone),1)])),_:1}),(0,p.Wm)(B,{label:"维修回信",style:{width:"95%"}},{default:(0,p.w5)((()=>[(0,p.Wm)(F,{style:{width:"100%"},modelValue:D.mtinfoobj.info[0].mtcontent,"onUpdate:modelValue":e[2]||(e[2]=t=>D.mtinfoobj.info[0].mtcontent=t),type:"textarea",placeholder:"输入回信",resize:"none",rows:"4"},null,8,["modelValue"])])),_:1}),"处理中"==D.mtinfoobj.info[0].status?((0,p.wg)(),(0,p.j4)(B,{key:0,style:{margin:"12px 20px 0 12px",float:"right"}},{default:(0,p.w5)((()=>[(0,p.Wm)(R,{type:"primary",onClick:D.onEditDone,style:{"font-weight":"700","font-size":"16px"}},{default:(0,p.w5)((()=>[(0,p.Uk)("完成")])),_:1},8,["onClick"])])),_:1})):(0,p.kq)("",!0),"未处理"==D.mtinfoobj.info[0].status?((0,p.wg)(),(0,p.j4)(B,{key:1,style:{margin:"12px 20px 0 12px",float:"right"}},{default:(0,p.w5)((()=>[(0,p.Wm)(R,{type:"primary",onClick:D.onEditAccept,style:{"font-weight":"700","font-size":"16px"}},{default:(0,p.w5)((()=>[(0,p.Uk)("受理")])),_:1},8,["onClick"])])),_:1})):(0,p.kq)("",!0),(0,p.Wm)(B,{style:{margin:"12px 0 0 0",float:"right"}},{default:(0,p.w5)((()=>[(0,p.Wm)(R,{type:"primary",onClick:D.onEditCancel,style:{"font-weight":"700","font-size":"16px"}},{default:(0,p.w5)((()=>[(0,p.Uk)("驳回")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])],512),[[u.F8,D.mtformhide]])])),_:1}),(0,p.Wm)(N,{style:{"z-index":"99"},handleId:D.deleteid,"onUpdate:handleId":e[3]||(e[3]=t=>D.deleteid=t),confirmStr:D.deletestr,onSettable:D.settable,handleType:D.deletetype,handleMessage:D.deletemessage},null,8,["handleId","confirmStr","onSettable","handleType","handleMessage"])],64)}n(7658);var Z=n(8017),S=n(3724),E=n(2748),T=n(4870),P=n(65),I={name:"dmsformmt",components:{CloseBold:E.q6s,Dmsconfirm:i.Z},setup(){const t=(0,P.oR)();let e=(0,T.qj)({info:[{id:0,appoint:"04-10 12:00--04-17 12:00",building:"48",room:"202",content:"风扇坏了",img:[],mtcontent:"已受理",mtman:"方某",mtphone:"",phone:"13356580997",status:"未处理",time:"2023-04-10 21:00",type:"水电-风扇"}]}),n=(0,T.qj)({list:["http://127.0.0.1/dmssrc/simple.jpg","http://127.0.0.1/dmssrc/simple1.jpg","http://127.0.0.1/dmssrc/simple2.jpg"]}),i=(0,T.iH)("http://127.0.0.1/dmssrc/simple.jpg"),l=(0,T.iH)("http://127.0.0.1/dmssrc/simple1.jpg"),a=(0,T.iH)("http://127.0.0.1/dmssrc/simple2.jpg"),o=(0,T.qj)({arr:["李某","方某","张某"]});const s=t=>{console.log(t),(0,S.LM)({pname:t}).then((t=>{0==t.status?(console.log(t.personnelphone),0==t.personnelphone.length&&(e.info[0].mtphone=""),e.info[0].mtphone=t.personnelphone[0].phone):console.log(t.message)})).catch((t=>{console.log(t.message)}))},m=(0,T.iH)(!1),r=()=>{m.value=!1},u=()=>{console.log(e.info[0].id),(0,Z.Vy)({id:e.info[0].id,mtman:e.info[0].mtman,mtcontent:e.info[0].mtcontent,mtphone:e.info[0].mtphone}).then((e=>{0==e.status&&(t.commit("setNoticeContent",e.message),b())})).catch((t=>{console.log(t.message)}))},d=(0,T.iH)(0),c=(0,T.iH)("确定要取消该维修单吗"),f=(0,T.iH)(5),g=(0,T.iH)(""),h=()=>{d.value=e.info[0].id,c.value="确定要取消该维修单吗",f.value=5,g.value=e.info[0].mtcontent},b=()=>{m.value=!1,t.commit("dsmaintain/setMtTableStatus")},v=()=>{d.value=e.info[0].id,c.value="确定该维修单已完成吗",f.value=18,g.value=e.info[0].mtcontent};return(0,p.bv)((()=>{(0,S.M1)({type:1}).then((t=>{if(0==t.status){let e=[];t.personnellist.forEach((t=>{e.push(t.pname)})),o.arr=e}})),(0,p.YP)((()=>t.state.dsmaintain.editmtstatus),(()=>{(0,Z.gc)({id:t.state.dsmaintain.editmtid}).then((t=>{0==t.status?(t.maintaininfo[0].room=t.maintaininfo[0].building+"栋"+t.maintaininfo[0].room,t.maintaininfo[0].img?t.maintaininfo[0].img=t.maintaininfo[0].img.split(" "):t.maintaininfo[0].img=[],0==t.maintaininfo[0].status?t.maintaininfo[0].status="未处理":1==t.maintaininfo[0].status&&(t.maintaininfo[0].status="处理中"),t.maintaininfo[0].mtcontent||(t.maintaininfo[0].mtcontent=""),t.maintaininfo[0].mtman||(t.maintaininfo[0].mtman=""),t.maintaininfo[0].mtphone||(t.maintaininfo[0].mtphone=""),e.info=t.maintaininfo,i.value=e.info[0].img[0],l.value=e.info[0].img[1],a.value=e.info[0].img[2],n.list=e.info[0].img):console.log(t.message)})).catch((t=>{console.log(t.message)})),m.value=!0}))})),{onEditAccept:u,onEditCancel:h,onEditDone:v,mtimglist:n,mtimgurl:i,mtimgurl1:l,mtimgurl2:a,mtformhide:m,mthide:r,mtinfoobj:e,deleteid:d,deletestr:c,deletetype:f,deletemessage:g,settable:b,mtmanoption:o,mtmanchange:s}}},Y=n(89);const B=(0,Y.Z)(I,[["render",D]]);var F=B},4584:function(t,e,n){n.r(e),n.d(e,{default:function(){return X}});var i=n(3616),l=(n(2064),n(3417)),a=(n(172),n(7113),n(2354)),o=(n(3877),n(7960),n(5177)),s=(n(802),n(1015)),m=(n(8474),n(3396)),r=n(9242),p=n(7139);const u={class:"mtmark"},d={class:"mtcontainer"},c=(0,m._)("span",{class:"mttitle"},"处理维修单",-1),f={class:"mtspan"},g=(0,m._)("span",null,"维修类型:",-1),h={class:"mtspan"},b=(0,m._)("span",null,"楼栋房间:",-1),v={class:"mtspan"},y=(0,m._)("span",null,"申报时间:",-1),w={class:"mtspan"},j=(0,m._)("span",null,"预约时间:",-1),_={class:"mtspan"},k=(0,m._)("span",null,"手机号码:",-1),x={class:"mtspan"},W=(0,m._)("span",null,"处理状态:",-1),z=(0,m._)("span",{class:"mtlabel"},"维修描述",-1),C=(0,m._)("span",{class:"mtlabel"},"维修图片",-1),H={class:"imggroup"},U={key:0,class:"mtnoimg"},V={style:{color:"var(--text-green)",position:"absolute",left:"150px",top:"0px"}};function M(t,e,n,M,q,D){const Z=(0,m.up)("CloseBold"),S=s.gn,E=o.F8,T=a.BT,P=a.km,I=i.nH,Y=l.EZ,B=i.ly;return(0,m.wg)(),(0,m.j4)(r.uT,{name:"mt"},{default:(0,m.w5)((()=>[(0,m.wy)((0,m._)("div",u,[(0,m._)("div",d,[(0,m.Wm)(S,{onClick:M.mthide,style:{position:"absolute",right:"8px",top:"8px","font-size":"24px",color:"var(--primary-green)","z-index":"90",cursor:"pointer"}},{default:(0,m.w5)((()=>[(0,m.Wm)(Z)])),_:1},8,["onClick"]),c,(0,m._)("span",f,[g,(0,m.Uk)((0,p.zw)(M.mtinfoobj.info[0].type),1)]),(0,m._)("span",h,[b,(0,m.Uk)((0,p.zw)(M.mtinfoobj.info[0].room),1)]),(0,m._)("span",v,[y,(0,m.Uk)((0,p.zw)(M.mtinfoobj.info[0].time),1)]),(0,m._)("span",w,[j,(0,m.Uk)((0,p.zw)(M.mtinfoobj.info[0].appoint),1)]),(0,m._)("span",_,[k,(0,m.Uk)((0,p.zw)(M.mtinfoobj.info[0].phone),1)]),(0,m._)("span",x,[W,(0,m.Uk)((0,p.zw)(M.mtinfoobj.info[0].status),1)]),z,(0,m.wy)((0,m._)("textarea",{class:"mttextarea",readonly:"","onUpdate:modelValue":e[0]||(e[0]=t=>M.mtinfoobj.info[0].content=t)},null,512),[[r.nr,M.mtinfoobj.info[0].content]]),C,(0,m._)("div",H,[0==M.mtinfoobj.info[0].img.length?((0,m.wg)(),(0,m.iD)("div",U," 无图片 ")):(0,m.kq)("",!0),M.mtimgurl?((0,m.wg)(),(0,m.j4)(E,{key:1,class:"mtimg",src:M.mtimgurl,"zoom-rate":1.2,"preview-src-list":M.mtimglist.list,"initial-index":0,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,m.kq)("",!0),M.mtimgurl1?((0,m.wg)(),(0,m.j4)(E,{key:2,class:"mtimg",src:M.mtimgurl1,"zoom-rate":1.2,"preview-src-list":M.mtimglist.list,"initial-index":1,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,m.kq)("",!0),M.mtimgurl2?((0,m.wg)(),(0,m.j4)(E,{key:3,class:"mtimg",src:M.mtimgurl2,"zoom-rate":1.2,"preview-src-list":M.mtimglist.list,"initial-index":2,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,m.kq)("",!0)]),(0,m.Wm)(B,{inline:!0,model:M.mtinfoobj.info[0],class:"mtform"},{default:(0,m.w5)((()=>[(0,m.Wm)(I,{label:"维修人员",style:{width:"50%"}},{default:(0,m.w5)((()=>[(0,m.Wm)(P,{modelValue:M.mtinfoobj.info[0].mtman,"onUpdate:modelValue":e[1]||(e[1]=t=>M.mtinfoobj.info[0].mtman=t),style:{width:"100%"},onChange:M.mtmanchange},{default:(0,m.w5)((()=>[((0,m.wg)(!0),(0,m.iD)(m.HY,null,(0,m.Ko)(M.mtmanoption.arr,(t=>((0,m.wg)(),(0,m.j4)(T,{key:t,label:t,value:t},null,8,["label","value"])))),128)),(0,m.Wm)(T,{label:"暂不选",value:""})])),_:1},8,["modelValue","onChange"]),(0,m._)("span",V,(0,p.zw)(M.mtinfoobj.info[0].mtphone),1)])),_:1}),(0,m.Wm)(I,{label:"维修回信",style:{width:"95%"}},{default:(0,m.w5)((()=>[(0,m.Wm)(Y,{style:{width:"100%"},modelValue:M.mtinfoobj.info[0].mtcontent,"onUpdate:modelValue":e[2]||(e[2]=t=>M.mtinfoobj.info[0].mtcontent=t),type:"textarea",placeholder:"输入回信",resize:"none",rows:"4"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])],512),[[r.F8,M.mtformhide]])])),_:1})}n(7658);var q=n(2651),D=n(8017),Z=n(3724),S=n(2748),E=n(4870),T=n(65),P={name:"dmsformmt",components:{CloseBold:S.q6s,Dmsconfirm:q.Z},setup(){const t=(0,T.oR)();let e=(0,E.qj)({info:[{id:0,appoint:"04-10 12:00--04-17 12:00",building:"48",room:"202",content:"风扇坏了",img:[],mtcontent:"已受理",mtman:"方某",mtphone:"",phone:"13356580997",status:"未处理",time:"2023-04-10 21:00",type:"水电-风扇"}]}),n=(0,E.qj)({list:["http://127.0.0.1/dmssrc/simple.jpg","http://127.0.0.1/dmssrc/simple1.jpg","http://127.0.0.1/dmssrc/simple2.jpg"]}),i=(0,E.iH)("http://127.0.0.1/dmssrc/simple.jpg"),l=(0,E.iH)("http://127.0.0.1/dmssrc/simple1.jpg"),a=(0,E.iH)("http://127.0.0.1/dmssrc/simple2.jpg"),o=(0,E.qj)({arr:["李某","方某","张某"]});const s=t=>{console.log(t),(0,Z.LM)({pname:t}).then((t=>{0==t.status?(console.log(t.personnelphone),0==t.personnelphone.length&&(e.info[0].mtphone=""),e.info[0].mtphone=t.personnelphone[0].phone):console.log(t.message)})).catch((t=>{console.log(t.message)}))},r=(0,E.iH)(!1),p=()=>{r.value=!1},u=()=>{r.value=!1,t.commit("dsmaintain/setMtHistoryTableStatus")};return(0,m.bv)((()=>{(0,Z.M1)({type:1}).then((t=>{if(0==t.status){let e=[];t.personnellist.forEach((t=>{e.push(t.pname)})),o.arr=e}})),(0,m.YP)((()=>t.state.dsmaintain.editmthistorystatus),(()=>{(0,D.gc)({id:t.state.dsmaintain.editmtid}).then((t=>{0==t.status?(t.maintaininfo[0].room=t.maintaininfo[0].building+"栋"+t.maintaininfo[0].room,t.maintaininfo[0].img?t.maintaininfo[0].img=t.maintaininfo[0].img.split(" "):t.maintaininfo[0].img=[],2==t.maintaininfo[0].status?t.maintaininfo[0].status="已处理":3==t.maintaininfo[0].status&&(t.maintaininfo[0].status="已取消"),t.maintaininfo[0].mtcontent||(t.maintaininfo[0].mtcontent=""),t.maintaininfo[0].mtman||(t.maintaininfo[0].mtman=""),t.maintaininfo[0].mtphone||(t.maintaininfo[0].mtphone=""),e.info=t.maintaininfo,i.value=e.info[0].img[0],l.value=e.info[0].img[1],a.value=e.info[0].img[2],n.list=e.info[0].img):console.log(t.message)})).catch((t=>{console.log(t.message)})),r.value=!0}))})),{mtimglist:n,mtimgurl:i,mtimgurl1:l,mtimgurl2:a,mtformhide:r,mthide:p,mtinfoobj:e,settable:u,mtmanoption:o,mtmanchange:s}}},I=n(89);const Y=(0,I.Z)(P,[["render",M]]);var B=Y,F=n(7951),R=(n(3069),n(4923)),L=(n(6905),n(9007),n(5478)),N=(n(6809),n(5833));n(8375);const $={style:{position:"relative"}},A={class:"maintainsift"},J={class:"elpageMaintain"};function K(t,e,n,o,s,r){const p=N.mg,u=i.nH,d=l.EZ,c=a.BT,f=a.km,g=L.mi,h=i.ly,b=R.$Y,v=R.eI,y=F.R,w=q.Z,j=B;return(0,m.wg)(),(0,m.iD)(m.HY,null,[(0,m._)("div",$,[(0,m._)("div",A,[(0,m.Wm)(h,{inline:!0,model:o.sifthistoryobj,class:"demo-form-inline"},{default:(0,m.w5)((()=>[(0,m.Wm)(u,{label:"维修类型",style:{width:"220px","margin-right":"32px"}},{default:(0,m.w5)((()=>[(0,m.Wm)(p,{modelValue:o.sifthistoryobj.type,"onUpdate:modelValue":e[0]||(e[0]=t=>o.sifthistoryobj.type=t),options:o.siftoptions,props:o.siftprops,placeholder:"全部"},null,8,["modelValue","options","props"])])),_:1}),(0,m.Wm)(u,{label:"楼栋",style:{width:"150px","margin-right":"32px"}},{default:(0,m.w5)((()=>[(0,m.Wm)(d,{modelValue:o.sifthistoryobj.building,"onUpdate:modelValue":e[1]||(e[1]=t=>o.sifthistoryobj.building=t),placeholder:"输入楼栋"},null,8,["modelValue"])])),_:1}),(0,m.Wm)(u,{label:"状态",style:{width:"150px","margin-right":"32px"}},{default:(0,m.w5)((()=>[(0,m.Wm)(f,{modelValue:o.sifthistoryobj.status,"onUpdate:modelValue":e[2]||(e[2]=t=>o.sifthistoryobj.status=t)},{default:(0,m.w5)((()=>[(0,m.Wm)(c,{label:"已完成",value:"2"}),(0,m.Wm)(c,{label:"已取消",value:"3"}),(0,m.Wm)(c,{label:"全部",value:""})])),_:1},8,["modelValue"])])),_:1}),(0,m.Wm)(u,{style:{"margin-right":"0",width:"60px"}},{default:(0,m.w5)((()=>[(0,m.Wm)(g,{type:"primary",onClick:o.onSiftHistorySubmit},{default:(0,m.w5)((()=>[(0,m.Uk)("检索")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,m.Wm)(v,{data:o.maintainhistorylist.list,style:{width:"100%",margin:"10px 0 18px",display:"inline-block"}},{default:(0,m.w5)((()=>[(0,m.Wm)(b,{align:"center",label:"申报时间",prop:"time",width:"180"}),(0,m.Wm)(b,{align:"center",label:"维修类型",prop:"type",width:"140"}),(0,m.Wm)(b,{align:"center",label:"楼栋房间",prop:"room",width:"120"}),(0,m.Wm)(b,{align:"center",label:"预约时间",prop:"appoint",width:"220"}),(0,m.Wm)(b,{align:"center",label:"维修描述",prop:"content"}),(0,m.Wm)(b,{align:"center",label:"手机号",prop:"phone",width:"160"}),(0,m.Wm)(b,{align:"center",label:"状态",prop:"status",width:"80"}),(0,m.Wm)(b,{align:"center",prop:"id",width:"150"},{header:(0,m.w5)((()=>[(0,m.Uk)(" 操作 ")])),default:(0,m.w5)((t=>[(0,m.Wm)(g,{style:{"background-color":"var(--primary-light-green)",color:"var(--text-gray-black)","font-weight":"700",border:"0px"},size:"small",onClick:e=>o.handleMaintainDetail(t.$index,t.row)},{default:(0,m.w5)((()=>[(0,m.Uk)("详情")])),_:2},1032,["onClick"]),(0,m.Wm)(g,{style:{color:"var(--text-gray-black)","font-weight":"700"},size:"small",type:"danger",onClick:e=>o.handleMaintainDelete(t.$index,t.row)},{default:(0,m.w5)((()=>[(0,m.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,m._)("div",J,[(0,m.Wm)(y,{"current-page":o.currentMaintainHistoryPage,"onUpdate:currentPage":e[3]||(e[3]=t=>o.currentMaintainHistoryPage=t),"page-size":12,disabled:o.maintainPageDisabled,background:"",layout:"total, prev, pager, next, jumper",total:o.maintainhistorytotal,onCurrentChange:o.handleMaintainCurrentChange},null,8,["current-page","disabled","total","onCurrentChange"])])]),(0,m.Wm)(w,{style:{"z-index":"99"},handleId:o.deleteid,"onUpdate:handleId":e[4]||(e[4]=t=>o.deleteid=t),confirmStr:o.deletestr,onSettable:o.settable,handleType:o.deletetype},null,8,["handleId","confirmStr","onSettable","handleType"]),(0,m.Wm)(j)],64)}var O=n(4450),G={name:"dmsmaintainhistory",components:{Dmsconfirm:q.Z,Dmsformmthistory:O.Z},setup(){const t=(0,T.oR)(),e=(0,E.iH)(100),n=(0,E.qj)({type:"",building:"",status:""});let i={type:"",building:"",status:""};const l=[{value:"水电",label:"水电",children:[{value:"灯管",label:"灯管"},{value:"风扇",label:"风扇"},{value:"水龙头",label:"水龙头"},{value:"花洒",label:"花洒"},{value:"空调",label:"空调"},{value:"冷水管",label:"冷水管"},{value:"热水管",label:"热水管"},{value:"开关",label:"开关"},{value:"插座",label:"插座"},{value:"饮水机",label:"饮水机"}]},{value:"土建",label:"土建",children:[{value:"厕所门",label:"厕所门"},{value:"阳台门",label:"阳台门"},{value:"浴室门",label:"浴室门"},{value:"进户门",label:"进户门"},{value:"窗户",label:"窗户"},{value:"天花板",label:"天花板"},{value:"墙壁",label:"墙壁"},{value:"门锁",label:"门锁"},{value:"洗手盘",label:"洗手盘"},{value:"厕所",label:"厕所"},{value:"下水道",label:"下水道"}]},{value:"家具",label:"家具",children:[{value:"凳子",label:"凳子"},{value:"床板",label:"床板"},{value:"衣柜",label:"衣柜"},{value:"蚊帐架",label:"蚊帐架"},{value:"床梯",label:"床梯"},{value:"床架",label:"床架"},{value:"桌面",label:"桌面"}]},{value:"其他",label:"其他",children:[{value:"灭鼠",label:"灭鼠"},{value:"灭蟑螂",label:"灭蟑螂"},{value:"灭蚁",label:"灭蚁"},{value:"其他",label:"其他"}]},{value:"",label:"全部"}],a={expandTrigger:"hover"},o=()=>{t.commit("setNoticeContent","检索中"),console.log(n),""!=n.type?i.type=n.type.join("-"):i.type=n.type,i.building=n.building,i.status=n.status,r(!0,i,1)},s=(0,E.qj)({list:[{id:1,time:"2023-02-17 23:26",type:"水电-风扇",room:"48栋202",appoint:"02-18 12:00--02-28 12:00",content:"风扇坏了风扇坏了风扇坏了...",phone:"13356580997",status:"未处理"}]}),r=(n,i,l)=>{let a=!1;for(let t in i)""!=i[t]&&(a=!0);0==a&&(i={}),(0,D.J8)({page:l,sift:i}).then((i=>{0==i.status?(i.maintainhistorylist.forEach((t=>{t.room=t.building+"栋"+t.room,t.content.length>12&&(t.content=t.content.substring(0,12)+"..."),2==t.status?t.status="已完成":3==t.status&&(t.status="已取消")})),e.value=Object.values(i.maintainhistorycount[0])[0],s.list=i.maintainhistorylist,n&&(t.commit("setNoticeContent",i.message),h.value=1)):console.log(i.message)})).catch((t=>{console.log(t.message)}))},p=(e,n)=>{t.commit("dsmaintain/setEditmtId",n.id),t.commit("dsmaintain/setEditmtHistoryStatus")},u=(0,E.iH)(0),d=(0,E.iH)("确定要删除该维修单吗"),c=(0,E.iH)(4),f=(t,e)=>{console.log(t,e),u.value=e.id,d.value="确定要删除该维修单吗",c.value=4},g=()=>{r(!1,i,h.value)},h=(0,E.iH)(1),b=(0,E.iH)(!1),v=t=>{r(!1,i,t)};return(0,m.bv)((()=>{r(!0,i,1),(0,m.YP)((()=>t.state.dsmaintain.mthistorytablestatus),(()=>{setmaintaintable(!1,siftobjsend,currentMaintainPage.value)}))})),(0,m.dl)((()=>{0!=s.list.length?r(!1,i,h.value):r(!1,i,1)})),{sifthistoryobj:n,siftoptions:l,siftprops:a,onSiftHistorySubmit:o,maintainhistorylist:s,handleMaintainDelete:f,currentMaintainHistoryPage:h,maintainPageDisabled:b,handleMaintainCurrentChange:v,maintainhistorytotal:e,deleteid:u,deletestr:d,deletetype:c,settable:g,handleMaintainDetail:p}}};const Q=(0,I.Z)(G,[["render",K]]);var X=Q}}]);
//# sourceMappingURL=584.9b6513c4.js.map