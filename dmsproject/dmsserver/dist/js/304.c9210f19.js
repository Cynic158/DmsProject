"use strict";(self["webpackChunkwyudmsdemo"]=self["webpackChunkwyudmsdemo"]||[]).push([[304],{3724:function(e,t,n){n.d(t,{FJ:function(){return o},LM:function(){return i},M1:function(){return a}});var l=n(1547);function a(e){return(0,l.Z)({url:"/api/getpersonnellist",method:"get",params:e})}function i(e){return(0,l.Z)({url:"/api/getpersonnelphone",method:"get",params:e})}function o(e){return(0,l.Z)({url:"/api/getpersonnelname",method:"get",params:e})}},4450:function(e,t,n){n.d(t,{Z:function(){return F}});var l=n(2651),a=n(3616),i=(n(2064),n(5478)),o=(n(6809),n(3417)),s=(n(172),n(7113),n(2354)),m=(n(3877),n(7960),n(5177)),r=(n(802),n(1015)),u=(n(8474),n(3396)),d=n(9242),p=n(7139);const c={class:"mtmark"},f={class:"mtcontainer"},g=(0,u._)("span",{class:"mttitle"},"处理维修单",-1),b={class:"mtspan"},h=(0,u._)("span",null,"维修类型:",-1),v={class:"mtspan"},w=(0,u._)("span",null,"楼栋房间:",-1),y={class:"mtspan"},k=(0,u._)("span",null,"申报时间:",-1),j={class:"mtspan"},_=(0,u._)("span",null,"预约时间:",-1),x={class:"mtspan"},W=(0,u._)("span",null,"手机号码:",-1),C={class:"mtspan"},z=(0,u._)("span",null,"处理状态:",-1),U=(0,u._)("span",{class:"mtlabel"},"维修描述",-1),H=(0,u._)("span",{class:"mtlabel"},"维修图片",-1),V={class:"imggroup"},M={key:0,class:"mtnoimg"},E={style:{color:"var(--text-green)",position:"absolute",left:"150px",top:"0px"}};function S(e,t,n,S,Z,D){const q=(0,u.up)("CloseBold"),T=r.gn,I=m.F8,P=s.BT,Y=s.km,B=a.nH,F=o.EZ,N=i.mi,R=a.ly,$=l.Z;return(0,u.wg)(),(0,u.iD)(u.HY,null,[(0,u.Wm)(d.uT,{name:"mt"},{default:(0,u.w5)((()=>[(0,u.wy)((0,u._)("div",c,[(0,u._)("div",f,[(0,u.Wm)(T,{onClick:S.mthide,style:{position:"absolute",right:"8px",top:"8px","font-size":"24px",color:"var(--primary-green)","z-index":"90",cursor:"pointer"}},{default:(0,u.w5)((()=>[(0,u.Wm)(q)])),_:1},8,["onClick"]),g,(0,u._)("span",b,[h,(0,u.Uk)((0,p.zw)(S.mtinfoobj.info[0].type),1)]),(0,u._)("span",v,[w,(0,u.Uk)((0,p.zw)(S.mtinfoobj.info[0].room),1)]),(0,u._)("span",y,[k,(0,u.Uk)((0,p.zw)(S.mtinfoobj.info[0].time),1)]),(0,u._)("span",j,[_,(0,u.Uk)((0,p.zw)(S.mtinfoobj.info[0].appoint),1)]),(0,u._)("span",x,[W,(0,u.Uk)((0,p.zw)(S.mtinfoobj.info[0].phone),1)]),(0,u._)("span",C,[z,(0,u.Uk)((0,p.zw)(S.mtinfoobj.info[0].status),1)]),U,(0,u.wy)((0,u._)("textarea",{class:"mttextarea",readonly:"","onUpdate:modelValue":t[0]||(t[0]=e=>S.mtinfoobj.info[0].content=e)},null,512),[[d.nr,S.mtinfoobj.info[0].content]]),H,(0,u._)("div",V,[0==S.mtinfoobj.info[0].img.length?((0,u.wg)(),(0,u.iD)("div",M," 无图片 ")):(0,u.kq)("",!0),S.mtimgurl?((0,u.wg)(),(0,u.j4)(I,{key:1,class:"mtimg",src:S.mtimgurl,"zoom-rate":1.2,"preview-src-list":S.mtimglist.list,"initial-index":0,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,u.kq)("",!0),S.mtimgurl1?((0,u.wg)(),(0,u.j4)(I,{key:2,class:"mtimg",src:S.mtimgurl1,"zoom-rate":1.2,"preview-src-list":S.mtimglist.list,"initial-index":1,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,u.kq)("",!0),S.mtimgurl2?((0,u.wg)(),(0,u.j4)(I,{key:3,class:"mtimg",src:S.mtimgurl2,"zoom-rate":1.2,"preview-src-list":S.mtimglist.list,"initial-index":2,fit:"cover","preview-teleported":!0},null,8,["src","zoom-rate","preview-src-list"])):(0,u.kq)("",!0)]),(0,u.Wm)(R,{inline:!0,model:S.mtinfoobj.info[0],class:"mtform"},{default:(0,u.w5)((()=>[(0,u.Wm)(B,{label:"维修人员",style:{width:"50%"}},{default:(0,u.w5)((()=>[(0,u.Wm)(Y,{modelValue:S.mtinfoobj.info[0].mtman,"onUpdate:modelValue":t[1]||(t[1]=e=>S.mtinfoobj.info[0].mtman=e),style:{width:"100%"},onChange:S.mtmanchange},{default:(0,u.w5)((()=>[((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(S.mtmanoption.arr,(e=>((0,u.wg)(),(0,u.j4)(P,{key:e,label:e,value:e},null,8,["label","value"])))),128)),(0,u.Wm)(P,{label:"暂不选",value:""})])),_:1},8,["modelValue","onChange"]),(0,u._)("span",E,(0,p.zw)(S.mtinfoobj.info[0].mtphone),1)])),_:1}),(0,u.Wm)(B,{label:"维修回信",style:{width:"95%"}},{default:(0,u.w5)((()=>[(0,u.Wm)(F,{style:{width:"100%"},modelValue:S.mtinfoobj.info[0].mtcontent,"onUpdate:modelValue":t[2]||(t[2]=e=>S.mtinfoobj.info[0].mtcontent=e),type:"textarea",placeholder:"输入回信",resize:"none",rows:"4"},null,8,["modelValue"])])),_:1}),"处理中"==S.mtinfoobj.info[0].status?((0,u.wg)(),(0,u.j4)(B,{key:0,style:{margin:"12px 20px 0 12px",float:"right"}},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{type:"primary",onClick:S.onEditDone,style:{"font-weight":"700","font-size":"16px"}},{default:(0,u.w5)((()=>[(0,u.Uk)("完成")])),_:1},8,["onClick"])])),_:1})):(0,u.kq)("",!0),"未处理"==S.mtinfoobj.info[0].status?((0,u.wg)(),(0,u.j4)(B,{key:1,style:{margin:"12px 20px 0 12px",float:"right"}},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{type:"primary",onClick:S.onEditAccept,style:{"font-weight":"700","font-size":"16px"}},{default:(0,u.w5)((()=>[(0,u.Uk)("受理")])),_:1},8,["onClick"])])),_:1})):(0,u.kq)("",!0),(0,u.Wm)(B,{style:{margin:"12px 0 0 0",float:"right"}},{default:(0,u.w5)((()=>[(0,u.Wm)(N,{type:"primary",onClick:S.onEditCancel,style:{"font-weight":"700","font-size":"16px"}},{default:(0,u.w5)((()=>[(0,u.Uk)("驳回")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])],512),[[d.F8,S.mtformhide]])])),_:1}),(0,u.Wm)($,{style:{"z-index":"99"},handleId:S.deleteid,"onUpdate:handleId":t[3]||(t[3]=e=>S.deleteid=e),confirmStr:S.deletestr,onSettable:S.settable,handleType:S.deletetype,handleMessage:S.deletemessage},null,8,["handleId","confirmStr","onSettable","handleType","handleMessage"])],64)}n(7658);var Z=n(8017),D=n(3724),q=n(2748),T=n(4870),I=n(65),P={name:"dmsformmt",components:{CloseBold:q.q6s,Dmsconfirm:l.Z},setup(){const e=(0,I.oR)();let t=(0,T.qj)({info:[{id:0,appoint:"04-10 12:00--04-17 12:00",building:"48",room:"202",content:"风扇坏了",img:[],mtcontent:"已受理",mtman:"方某",mtphone:"",phone:"13356580997",status:"未处理",time:"2023-04-10 21:00",type:"水电-风扇"}]}),n=(0,T.qj)({list:["http://127.0.0.1/dmssrc/simple.jpg","http://127.0.0.1/dmssrc/simple1.jpg","http://127.0.0.1/dmssrc/simple2.jpg"]}),l=(0,T.iH)("http://127.0.0.1/dmssrc/simple.jpg"),a=(0,T.iH)("http://127.0.0.1/dmssrc/simple1.jpg"),i=(0,T.iH)("http://127.0.0.1/dmssrc/simple2.jpg"),o=(0,T.qj)({arr:["李某","方某","张某"]});const s=e=>{console.log(e),(0,D.LM)({pname:e}).then((e=>{0==e.status?(console.log(e.personnelphone),0==e.personnelphone.length&&(t.info[0].mtphone=""),t.info[0].mtphone=e.personnelphone[0].phone):console.log(e.message)})).catch((e=>{console.log(e.message)}))},m=(0,T.iH)(!1),r=()=>{m.value=!1},d=()=>{console.log(t.info[0].id),(0,Z.Vy)({id:t.info[0].id,mtman:t.info[0].mtman,mtcontent:t.info[0].mtcontent,mtphone:t.info[0].mtphone}).then((t=>{0==t.status&&(e.commit("setNoticeContent",t.message),h())})).catch((e=>{console.log(e.message)}))},p=(0,T.iH)(0),c=(0,T.iH)("确定要取消该维修单吗"),f=(0,T.iH)(5),g=(0,T.iH)(""),b=()=>{p.value=t.info[0].id,c.value="确定要取消该维修单吗",f.value=5,g.value=t.info[0].mtcontent},h=()=>{m.value=!1,e.commit("dsmaintain/setMtTableStatus")},v=()=>{p.value=t.info[0].id,c.value="确定该维修单已完成吗",f.value=18,g.value=t.info[0].mtcontent};return(0,u.bv)((()=>{(0,D.M1)({type:1}).then((e=>{if(0==e.status){let t=[];e.personnellist.forEach((e=>{t.push(e.pname)})),o.arr=t}})),(0,u.YP)((()=>e.state.dsmaintain.editmtstatus),(()=>{(0,Z.gc)({id:e.state.dsmaintain.editmtid}).then((e=>{0==e.status?(e.maintaininfo[0].room=e.maintaininfo[0].building+"栋"+e.maintaininfo[0].room,e.maintaininfo[0].img?e.maintaininfo[0].img=e.maintaininfo[0].img.split(" "):e.maintaininfo[0].img=[],0==e.maintaininfo[0].status?e.maintaininfo[0].status="未处理":1==e.maintaininfo[0].status&&(e.maintaininfo[0].status="处理中"),e.maintaininfo[0].mtcontent||(e.maintaininfo[0].mtcontent=""),e.maintaininfo[0].mtman||(e.maintaininfo[0].mtman=""),e.maintaininfo[0].mtphone||(e.maintaininfo[0].mtphone=""),t.info=e.maintaininfo,l.value=t.info[0].img[0],a.value=t.info[0].img[1],i.value=t.info[0].img[2],n.list=t.info[0].img):console.log(e.message)})).catch((e=>{console.log(e.message)})),m.value=!0}))})),{onEditAccept:d,onEditCancel:b,onEditDone:v,mtimglist:n,mtimgurl:l,mtimgurl1:a,mtimgurl2:i,mtformhide:m,mthide:r,mtinfoobj:t,deleteid:p,deletestr:c,deletetype:f,deletemessage:g,settable:h,mtmanoption:o,mtmanchange:s}}},Y=n(89);const B=(0,Y.Z)(P,[["render",S]]);var F=B},6304:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});var l=n(4450),a=n(2651),i=n(7951),o=(n(3069),n(4923)),s=(n(6905),n(9007),n(3616)),m=(n(2064),n(5478)),r=(n(6809),n(2354)),u=(n(3877),n(7960),n(3417)),d=(n(172),n(7113),n(5833)),p=(n(8375),n(3396));const c={style:{position:"relative"}},f={class:"maintainsift"},g={class:"elpageMaintain"};function b(e,t,n,b,h,v){const w=d.mg,y=s.nH,k=u.EZ,j=r.BT,_=r.km,x=m.mi,W=s.ly,C=o.$Y,z=o.eI,U=i.R,H=a.Z,V=l.Z;return(0,p.wg)(),(0,p.iD)(p.HY,null,[(0,p._)("div",c,[(0,p._)("div",f,[(0,p.Wm)(W,{inline:!0,model:b.siftobj,class:"demo-form-inline"},{default:(0,p.w5)((()=>[(0,p.Wm)(y,{label:"维修类型",style:{width:"220px","margin-right":"32px"}},{default:(0,p.w5)((()=>[(0,p.Wm)(w,{modelValue:b.siftobj.type,"onUpdate:modelValue":t[0]||(t[0]=e=>b.siftobj.type=e),options:b.siftoptions,props:b.siftprops,placeholder:"全部"},null,8,["modelValue","options","props"])])),_:1}),(0,p.Wm)(y,{label:"楼栋",style:{width:"150px","margin-right":"32px"}},{default:(0,p.w5)((()=>[(0,p.Wm)(k,{modelValue:b.siftobj.building,"onUpdate:modelValue":t[1]||(t[1]=e=>b.siftobj.building=e),placeholder:"输入楼栋"},null,8,["modelValue"])])),_:1}),(0,p.Wm)(y,{label:"状态",style:{width:"150px","margin-right":"32px"}},{default:(0,p.w5)((()=>[(0,p.Wm)(_,{modelValue:b.siftobj.status,"onUpdate:modelValue":t[2]||(t[2]=e=>b.siftobj.status=e)},{default:(0,p.w5)((()=>[(0,p.Wm)(j,{label:"未处理",value:"0"}),(0,p.Wm)(j,{label:"处理中",value:"1"}),(0,p.Wm)(j,{label:"全部",value:""})])),_:1},8,["modelValue"])])),_:1}),(0,p.Wm)(y,{style:{"margin-right":"0",width:"60px"}},{default:(0,p.w5)((()=>[(0,p.Wm)(x,{type:"primary",onClick:b.onSiftSubmit},{default:(0,p.w5)((()=>[(0,p.Uk)("检索")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,p.Wm)(z,{data:b.maintainlist.list,style:{width:"100%",margin:"10px 0 18px",display:"inline-block"}},{default:(0,p.w5)((()=>[(0,p.Wm)(C,{align:"center",label:"申报时间",prop:"time",width:"180"}),(0,p.Wm)(C,{align:"center",label:"维修类型",prop:"type",width:"140"}),(0,p.Wm)(C,{align:"center",label:"楼栋房间",prop:"room",width:"120"}),(0,p.Wm)(C,{align:"center",label:"预约时间",prop:"appoint",width:"220"}),(0,p.Wm)(C,{align:"center",label:"维修描述",prop:"content"}),(0,p.Wm)(C,{align:"center",label:"手机号",prop:"phone",width:"160"}),(0,p.Wm)(C,{align:"center",label:"状态",prop:"status",width:"80"}),(0,p.Wm)(C,{align:"center",prop:"id",width:"150"},{header:(0,p.w5)((()=>[(0,p.Uk)(" 操作 ")])),default:(0,p.w5)((e=>[(0,p.Wm)(x,{style:{"background-color":"var(--primary-light-green)",color:"var(--text-gray-black)","font-weight":"700",border:"0px"},size:"small",onClick:t=>b.handleMaintainEdit(e.$index,e.row)},{default:(0,p.w5)((()=>[(0,p.Uk)("处理")])),_:2},1032,["onClick"]),(0,p.Wm)(x,{style:{color:"var(--text-gray-black)","font-weight":"700"},size:"small",type:"danger",onClick:t=>b.handleMaintainDelete(e.$index,e.row)},{default:(0,p.w5)((()=>[(0,p.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,p._)("div",g,[(0,p.Wm)(U,{"current-page":b.currentMaintainPage,"onUpdate:currentPage":t[3]||(t[3]=e=>b.currentMaintainPage=e),"page-size":12,disabled:b.maintainPageDisabled,background:"",layout:"total, prev, pager, next, jumper",total:b.maintaintotal,onCurrentChange:b.handleMaintainCurrentChange},null,8,["current-page","disabled","total","onCurrentChange"])])]),(0,p.Wm)(H,{style:{"z-index":"99"},handleId:b.deleteid,"onUpdate:handleId":t[4]||(t[4]=e=>b.deleteid=e),confirmStr:b.deletestr,onSettable:b.settable,handleType:b.deletetype},null,8,["handleId","confirmStr","onSettable","handleType"]),(0,p.Wm)(V)],64)}var h=n(8017),v=n(4870),w=n(65),y={name:"dmsmaintaininfo",components:{Dmsconfirm:a.Z,Dmsformmt:l.Z},setup(){const e=(0,w.oR)(),t=(0,v.iH)(100),n=(0,v.qj)({type:"",building:"",status:""});let l={type:"",building:"",status:""};const a=[{value:"水电",label:"水电",children:[{value:"灯管",label:"灯管"},{value:"风扇",label:"风扇"},{value:"水龙头",label:"水龙头"},{value:"花洒",label:"花洒"},{value:"空调",label:"空调"},{value:"冷水管",label:"冷水管"},{value:"热水管",label:"热水管"},{value:"开关",label:"开关"},{value:"插座",label:"插座"},{value:"饮水机",label:"饮水机"}]},{value:"土建",label:"土建",children:[{value:"厕所门",label:"厕所门"},{value:"阳台门",label:"阳台门"},{value:"浴室门",label:"浴室门"},{value:"进户门",label:"进户门"},{value:"窗户",label:"窗户"},{value:"天花板",label:"天花板"},{value:"墙壁",label:"墙壁"},{value:"门锁",label:"门锁"},{value:"洗手盘",label:"洗手盘"},{value:"厕所",label:"厕所"},{value:"下水道",label:"下水道"}]},{value:"家具",label:"家具",children:[{value:"凳子",label:"凳子"},{value:"床板",label:"床板"},{value:"衣柜",label:"衣柜"},{value:"蚊帐架",label:"蚊帐架"},{value:"床梯",label:"床梯"},{value:"床架",label:"床架"},{value:"桌面",label:"桌面"}]},{value:"其他",label:"其他",children:[{value:"灭鼠",label:"灭鼠"},{value:"灭蟑螂",label:"灭蟑螂"},{value:"灭蚁",label:"灭蚁"},{value:"其他",label:"其他"}]},{value:"",label:"全部"}],i={expandTrigger:"hover"},o=()=>{e.commit("setNoticeContent","检索中"),console.log(n),""!=n.type?l.type=n.type.join("-"):l.type=n.type,l.building=n.building,l.status=n.status,m(!0,l,1)},s=(0,v.qj)({list:[{id:1,time:"2023-02-17 23:26",type:"水电-风扇",room:"48栋202",appoint:"02-18 12:00--02-28 12:00",content:"风扇坏了风扇坏了风扇坏了...",phone:"13356580997",status:"未处理"}]}),m=(n,l,a)=>{let i=!1;for(let e in l)""!=l[e]&&(i=!0);0==i&&(l={}),(0,h.Vm)({page:a,sift:l}).then((l=>{0==l.status?(l.maintainlist.forEach((e=>{e.room=e.building+"栋"+e.room,e.content.length>12&&(e.content=e.content.substring(0,12)+"..."),0==e.status?e.status="未处理":1==e.status&&(e.status="处理中")})),t.value=Object.values(l.maintaincount[0])[0],s.list=l.maintainlist,n&&(e.commit("setNoticeContent",l.message),b.value=1)):console.log(l.message)})).catch((e=>{console.log(e.message)}))},r=(t,n)=>{e.commit("dsmaintain/setEditmtId",n.id),e.commit("dsmaintain/setEditmtStatus")},u=(0,v.iH)(0),d=(0,v.iH)("确定要删除该维修单吗"),c=(0,v.iH)(4),f=(e,t)=>{console.log(e,t),u.value=t.id,d.value="确定要删除该维修单吗",c.value=4},g=()=>{m(!1,l,b.value)},b=(0,v.iH)(1),y=(0,v.iH)(!1),k=e=>{m(!1,l,e)};return(0,p.bv)((()=>{m(!0,l,1),(0,p.YP)((()=>e.state.dsmaintain.mttablestatus),(()=>{m(!1,l,b.value)}))})),(0,p.dl)((()=>{0!=s.list.length?m(!1,l,b.value):m(!1,l,1)})),{maintaintotal:t,siftobj:n,siftoptions:a,siftprops:i,onSiftSubmit:o,maintainlist:s,handleMaintainEdit:r,handleMaintainDelete:f,currentMaintainPage:b,maintainPageDisabled:y,handleMaintainCurrentChange:k,deleteid:u,deletestr:d,deletetype:c,settable:g}}},k=n(89);const j=(0,k.Z)(y,[["render",b]]);var _=j}}]);
//# sourceMappingURL=304.c9210f19.js.map