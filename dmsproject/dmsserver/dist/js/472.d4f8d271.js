"use strict";(self["webpackChunkwyudmsdemo"]=self["webpackChunkwyudmsdemo"]||[]).push([[472],{5472:function(e,t,o){o.r(t),o.d(t,{default:function(){return C}});var i=o(2651),n=o(7951),c=(o(3069),o(4923)),l=(o(6905),o(5478)),a=(o(6809),o(9007),o(3396)),s=o(7139),d=o(9242);const r={style:{position:"relative"}},u={class:"noticeContainer"},m={class:"noticeTitle"},p={class:"noticeFoot"},g={class:"noticeTime"},b={class:"noticeMan"},h={class:"elpageNotice"};function f(e,t,o,f,v,w){const y=c.$Y,k=l.mi,N=c.eI,_=n.R,C=i.Z;return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[(0,a._)("div",u,[(0,a._)("p",m,(0,s.zw)(f.noticeinfo.info[0].title),1),(0,a.wy)((0,a._)("textarea",{class:"noticeContent",readonly:"","onUpdate:modelValue":t[0]||(t[0]=e=>f.noticeinfo.info[0].content=e)},"\r\n      ",512),[[d.nr,f.noticeinfo.info[0].content]]),(0,a._)("p",p,[(0,a._)("span",g,"时间: "+(0,s.zw)(f.noticeinfo.info[0].time),1),(0,a._)("span",b,"负责人: "+(0,s.zw)(f.noticeinfo.info[0].noticeman),1)])]),(0,a.Wm)(N,{class:"noticetable",onRowClick:f.rowclick,data:f.noticelist.list,style:{width:"calc(100% - 430px)","margin-bottom":"18px",display:"inline-block",position:"absolute",left:"430px",top:"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{align:"center",label:"时间",prop:"time",width:"200"}),(0,a.Wm)(y,{align:"center",label:"标题",prop:"title"}),(0,a.Wm)(y,{align:"center",label:"负责人",prop:"noticeman",width:"150"}),0==f.pagetype?((0,a.wg)(),(0,a.j4)(y,{key:0,align:"center",prop:"id",width:"150"},{header:(0,a.w5)((()=>[(0,a.Uk)(" 操作 ")])),default:(0,a.w5)((e=>[(0,a.Wm)(k,{style:{"background-color":"var(--primary-light-green)",color:"var(--text-gray-black)","font-weight":"700",border:"0px"},size:"small",onClick:t=>f.handleNoticeEdit(e.$index,e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("更改")])),_:2},1032,["onClick"]),(0,a.Wm)(k,{style:{color:"var(--text-gray-black)","font-weight":"700"},size:"small",type:"danger",onClick:t=>f.handleNoticeDelete(e.$index,e.row)},{default:(0,a.w5)((()=>[(0,a.Uk)("删除")])),_:2},1032,["onClick"])])),_:1})):(0,a.kq)("",!0)])),_:1},8,["onRowClick","data"]),0==f.pagetype?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"sendNotice",onClick:t[1]||(t[1]=(...e)=>f.publish&&f.publish(...e))}," 发布公告 ")):(0,a.kq)("",!0),(0,a._)("div",h,[(0,a.Wm)(_,{"current-page":f.currentNoticePage,"onUpdate:currentPage":t[2]||(t[2]=e=>f.currentNoticePage=e),"page-size":12,disabled:f.noticePageDisabled,background:"",layout:"total, prev, pager, next, jumper",total:f.noticetotal,onCurrentChange:f.handleNoticeCurrentChange},null,8,["current-page","disabled","total","onCurrentChange"])])]),(0,a.Wm)(C,{style:{"z-index":"99"},handleId:f.deleteid,"onUpdate:handleId":t[3]||(t[3]=e=>f.deleteid=e),confirmStr:f.deletestr,onSettable:f.settable,handleType:f.deletetype},null,8,["handleId","confirmStr","onSettable","handleType"])],64)}var v=o(9406),w=o(4870),y=o(65),k={name:"dmsnotice",components:{Dmsconfirm:i.Z},setup(){let e=(0,w.qj)({list:[{id:1,time:"2023-02-17 23:26",title:"40栋维修水管暂时供水",noticeman:"管理员"}]}),t=(0,w.qj)({info:[{title:"无标题",content:"正文",time:"2023-03-01 17:16",noticeman:"管理员"}]});const o=(0,y.oR)(),i=(e,t)=>{o.commit("dsnotice/setEditNoticeType",0),o.commit("dsnotice/setEditNoticeTitle","更改公告"),(0,v.tT)({id:t.id}).then((e=>{0==e.status?(o.commit("dsnotice/setEditNoticeobj",e.noticeinfo[0]),o.commit("dsnotice/setEditNoticeStatus")):console.log(e.message)})).catch((e=>{console.log(e.message)}))},n=()=>{c(1),l(0)},c=t=>{(0,v.vo)({page:t}).then((t=>{0==t.status?(e.list=t.noticelist,p.value=Object.values(t.noticecount[0])[0],h()):console.log(t.message)})).catch((e=>{console.log(e.message)}))},l=e=>{(0,v.tT)({id:e}).then((e=>{0==e.status?(t.info=e.noticeinfo,o.commit("dsnotice/setActiveNoticepage",m.value)):console.log(e.message)})).catch((e=>{console.log(e.message)}))},s=(0,w.iH)(0),d=(0,w.iH)("确定要删除该公告吗"),r=(0,w.iH)(1),u=(e,t)=>{console.log(e,t),s.value=t.id,d.value="确定要删除该公告吗",r.value=1},m=(0,w.iH)(1),p=(0,w.iH)(100),g=(0,w.iH)(!1),b=e=>{c(e)},h=()=>{setTimeout((()=>{let e=0;document.querySelectorAll(".noticetable .el-table__row").forEach((t=>{t.getAttribute("index")||t.addEventListener("click",(function(){o.commit("dsnotice/setActiveNotice",t.getAttribute("index")),document.querySelectorAll(".noticetable .el-table__row").forEach((e=>{e.classList.remove("activenoticecolor")})),t.classList.add("activenoticecolor")})),t.setAttribute("index",e),e++})),o.state.dsnotice.activenoticepage==m.value?document.querySelectorAll(".noticetable .el-table__row").forEach((e=>{e.getAttribute("index")==o.state.dsnotice.activenotice&&e.classList.add("activenoticecolor")})):document.querySelectorAll(".noticetable .el-table__row").forEach((e=>{e.classList.remove("activenoticecolor")}))}),500)},f=function(e){l(e.id)},k=()=>{const e={title:"无标题",content:"",noticeman:"管理员"};o.commit("dsnotice/setEditNoticeTitle","发布公告"),o.commit("dsnotice/setEditNoticeType",1),o.commit("dsnotice/setEditNoticeobj",e),o.commit("dsnotice/setEditNoticeStatus")},N=(0,w.iH)(1);return(0,a.bv)((()=>{c(1),l(0),(0,a.YP)((()=>o.state.dsnotice.noticetablestatus),(()=>{c(m.value),l(o.state.dsnotice.editnoticeobj.id)})),N.value=o.state.dsuser.dsuserInfo.type})),{noticelist:e,handleNoticeEdit:i,handleNoticeDelete:u,currentNoticePage:m,noticetotal:p,noticePageDisabled:g,handleNoticeCurrentChange:b,rowclick:f,noticeinfo:t,publish:k,deleteid:s,setnoticetable:c,deletetype:r,deletestr:d,settable:n,pagetype:N}}},N=o(89);const _=(0,N.Z)(k,[["render",f]]);var C=_}}]);
//# sourceMappingURL=472.d4f8d271.js.map